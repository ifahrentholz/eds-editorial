import{j as h,x as n,T as m}from"../__chunks__/lit-element.XkUWx5ik.js";import{S as f,f as g,c as P}from"../__chunks__/createOptimizedPicture.FL3x6PMT.js";const $=t=>t?n`<h3>${t}</h3>`:m,w=t=>t?t.length>200?n`<p>${t.slice(0,200)}...</p>`:n`<p>${t}</p>`:m,x=t=>{const{postUrl:a,headline:s,text:e,picture:o,buttontext:p}=t;return n`<article><a href="${a}" class="image">${o}</a> ${$(s)} ${w(e)}<ul class="actions"><li><a href="${a}" class="button">${p||"Goto Post"}</a></li></ul></article>`},y=t=>t.map(a=>x(a)),T=t=>{var s;return((s=Array.from(t.querySelectorAll("p")).find(e=>e.innerText.trim().length>0))==null?void 0:s.innerText)||void 0};async function v(t){t.innerHTML="";const a=new DOMParser,e=(await f.getSiteMap()).filter(r=>r.path.includes("/posts")),u=(await Promise.all(e.map(async r=>await g(`${r.path}.plain.html`)))).map(r=>a.parseFromString(r,"text/html")).map((r,i)=>{var l,c;return{postUrl:`${window.hlx.codeBasePath}${e[i].path}`,headline:((l=r.querySelector("h1"))==null?void 0:l.innerText)||((c=r.querySelector("h2"))==null?void 0:c.innerText),text:T(r),buttontext:e[i].buttontext,picture:P({src:e[i].image,alt:e[i].imagealt,width:"323",height:"199"})}});t.style.removeProperty("display"),h(y(u),t)}export{v as default};
//# sourceMappingURL=posts.js.map
