import{j as y,x as n,T as u}from"../__chunks__/lit-element.XkUWx5ik.js";import{F as m,c as d}from"../__chunks__/createOptimizedPicture.QGsiY4WI.js";import{i as x}from"../__chunks__/extractSidekickLibraryId.ii0iU8xy.js";import{o as h}from"../__chunks__/if-defined.JfW-uEqn.js";const P=t=>t?n`<h3>${t}</h3>`:u,$=t=>t?t.length>200?n`<p>${t.slice(0,200)}...</p>`:n`<p>${t}</p>`:u,w=t=>{const{postUrl:s,headline:a,text:e,picture:o,buttontext:p}=t;return n`<article><a href="${h(s)}" class="image">${o}</a> ${P(a)} ${$(e)}<ul class="actions"><li><a href="${h(s)}" class="button">${p||"Goto Post"}</a></li></ul></article>`},g=t=>t.map(s=>w(s)),T=t=>{var a;return(a=Array.from(t.querySelectorAll("p")).find(e=>e.innerText.trim().length>0))==null?void 0:a.innerText};async function H(t){t.innerHTML="";const s=new DOMParser,e=(await m.fetchJson("/query-index.json")).data.filter(r=>r.path.startsWith("/posts")),f=(await Promise.all(e.map(async r=>await m.fetchText(`${r.path}.plain.html`)))).map(r=>s.parseFromString(r,"text/html")).map((r,i)=>{var c,l;return{postUrl:x?void 0:`${window.hlx.codeBasePath}${e[i].path}`,headline:((c=r.querySelector("h1"))==null?void 0:c.innerText)||((l=r.querySelector("h2"))==null?void 0:l.innerText),text:T(r),buttontext:e[i].buttontext,picture:d({src:e[i].image,alt:e[i].imagealt,width:"323",height:"199"})}});t.style.removeProperty("display"),y(g(f),t)}export{H as default};
//# sourceMappingURL=posts.js.map
