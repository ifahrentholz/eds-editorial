import{a as d}from"../__chunks__/tslib.es6.cver2Yc4.js";import{j as h,i as v}from"../__chunks__/private-ssr-support.uesIj2BQ.js";import{c as y}from"../__chunks__/createOptimizedPicture.F94eikeI.js";const{AttributePart:u}=v,x=t=>t,P={h:x`\n    <article>\n      <a class="image"><?></a>\n      <h3><?></h3>\n      <p><?></p>\n      <ul class="actions">\n        <li><a class="button">Goto Post</a></li>\n      </ul>\n    </article>\n  `,parts:[{type:1,index:1,name:"href",strings:["",""],ctor:u},{type:2,index:2},{type:2,index:4},{type:2,index:6},{type:1,index:9,name:"href",strings:["",""],ctor:u}]},f=t=>{const{postUrl:n,headline:p,text:r,picture:c}=t;return{_$litType$:P,values:[n,c,p,r==null?void 0:r.slice(0,200),n]}},w=t=>t.map(n=>f(n));function T(t){return d(this,void 0,void 0,function*(){t.innerHTML="";const r=(yield(yield fetch(`${window.hlx.codeBasePath}/query-index.json`)).json()).data.filter(e=>e.path.includes("/posts")),m=(yield Promise.all(r.map(e=>d(this,void 0,void 0,function*(){return(yield fetch(`${window.hlx.codeBasePath}${e.path}.plain.html`)).text()})))).map(e=>{var i=new DOMParser;return i.parseFromString(e,"text/html")}).map((e,i)=>{var s,o,a,l;return{postUrl:`${window.hlx.codeBasePath}${r[i].path}`,headline:((s=e.querySelector("h1"))===null||s===void 0?void 0:s.innerText)||((o=e.querySelector("h2"))===null||o===void 0?void 0:o.innerText),text:(l=(a=e.querySelector("p"))===null||a===void 0?void 0:a.innerText)===null||l===void 0?void 0:l.trim(),picture:y({src:r[i].image,alt:r[i].imagealt})}});t.style.removeProperty("display"),h(w(m),t)})}export{T as default};
//# sourceMappingURL=posts.js.map
