import"../__chunks__/lit-element.0TQwaCpT.js";import{j as h,x as u}from"../__chunks__/lit-html.6NN5RoO6.js";import{c as w}from"../__chunks__/createOptimizedPicture.F94eikeI.js";const d=r=>{const{postUrl:a,headline:o,text:t,picture:n}=r;return u`<article><a href="${a}" class="image">${n}</a><h3>${o}</h3><p>${t==null?void 0:t.slice(0,200)}</p><ul class="actions"><li><a href="${a}" class="button">More</a></li></ul></article>`},P=r=>r.map(a=>d(a));async function q(r){r.innerHTML="";const t=(await(await fetch(`${window.hlx.codeBasePath}/query-index.json`)).json()).data.filter(e=>e.path.includes("/posts")),m=(await Promise.all(t.map(async e=>(await fetch(`${window.hlx.codeBasePath}${e.path}.plain.html`)).text()))).map(e=>{var s=new DOMParser;return s.parseFromString(e,"text/html")}).map((e,s)=>{var i,l,p,c;return{postUrl:`${window.hlx.codeBasePath}${t[s].path}`,headline:((i=e.querySelector("h1"))==null?void 0:i.innerText)||((l=e.querySelector("h2"))==null?void 0:l.innerText),text:(c=(p=e.querySelector("p"))==null?void 0:p.innerText)==null?void 0:c.trim(),picture:w({src:t[s].image,alt:t[s].imagealt})}});r.style.removeProperty("display"),h(P(m),r)}export{q as default};
//# sourceMappingURL=posts.js.map
