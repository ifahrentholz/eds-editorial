import{j as f,x as a,T as o}from"../__chunks__/lit-element.XkUWx5ik.js";import{F as h,c as d}from"../__chunks__/createOptimizedPicture.B9jkiHo4.js";const y=t=>t?a`<h3>${t}</h3>`:o,P=t=>t?t.length>200?a`<p>${t.slice(0,200)}...</p>`:a`<p>${t}</p>`:o,$=(t,e)=>e?a`<a href="${t}" class="image">${e}</a>`:o,x=t=>{const{postUrl:e,headline:s,text:r,picture:p,buttontext:l}=t;return a`<article>${$(e,p)} ${y(s)} ${P(r)}<ul class="actions"><li><a href="${e}" class="button">${l||"Goto Post"}</a></li></ul></article>`},w=t=>t.map(e=>x(e)),g=t=>{var s;return(s=Array.from(t.querySelectorAll("p")).find(r=>r.innerText.trim().length>0))==null?void 0:s.innerText};async function v(t){t.innerHTML="";const e=new DOMParser,r=(await h.fetchJson("/query-index.json")).data.filter(n=>n.path.includes("/posts")),m=(await Promise.all(r.map(async n=>await h.fetchText(`${n.path}.plain.html`)))).map(n=>e.parseFromString(n,"text/html")).map((n,i)=>{var c,u;return{postUrl:`${window.hlx.codeBasePath}${r[i].path}`,headline:((c=n.querySelector("h1"))==null?void 0:c.innerText)||((u=n.querySelector("h2"))==null?void 0:u.innerText),text:g(n),buttontext:r[i].buttontext,picture:d({src:r[i].image,alt:r[i].imagealt,width:"323",height:"199"})}});t.style.removeProperty("display"),f(w(m),t)}export{v as default};
//# sourceMappingURL=posts.js.map
