{"version":3,"file":"table.js","sources":["../../src/blocks/table/table.ts"],"sourcesContent":["import { html, render } from 'lit';\nimport { ConstructedElement, extractSidekickLibId } from '../../utils/extractSidekickLibID';\nimport { ifDefined } from 'lit-html/directives/if-defined.js';\n\ninterface TemplateArgs {\n  headers: ConstructedElement[];\n  data: ConstructedElement[][];\n}\n\nconst template = (args: TemplateArgs) => {\n  const { headers, data } = args;\n\n  return html`\n    <div class=\"table-wrapper\">\n      <table>\n        <thead>\n          <tr>\n            ${headers.map(\n              (header) => html`\n                <th\n                  data-library-id=\"${ifDefined(header.id)}\"\n                  contenteditable=\"${ifDefined(header.id ? true : undefined)}\"\n                >\n                  ${header.text}\n                </th>\n              `\n            )}\n          </tr>\n        </thead>\n        <tbody>\n          ${data.map(\n            (row) => html`\n              <tr>\n                ${row.map(\n                  (cell) => html`\n                    <td\n                      data-library-id=\"${ifDefined(cell.id)}\"\n                      contenteditable=\"${ifDefined(cell.id ? true : undefined)}\"\n                    >\n                      ${cell.text}\n                    </td>\n                  `\n                )}\n              </tr>\n            `\n          )}\n        </tbody>\n      </table>\n    </div>\n  `;\n};\n\nexport default function decorate(block: HTMLElement) {\n  const headers: ConstructedElement[] = [];\n  const data: ConstructedElement[][] = [];\n\n  [...block.children].forEach((child, index) => {\n    if (index === 0) {\n      headers.push(\n        ...Array.from(child.querySelectorAll<HTMLElement>('strong')).map((cell) => ({\n          text: cell.textContent || '',\n          id: extractSidekickLibId(cell).id,\n        }))\n      );\n    } else {\n      data.push(\n        Array.from(child.querySelectorAll<HTMLElement>('strong')).map((cell) => ({\n          text: cell.textContent || '',\n          id: extractSidekickLibId(cell).id,\n        }))\n      );\n    }\n  });\n\n  // block.innerHTML = '';\n\n  // block.style.removeProperty('display');\n  // render(template({ headers, data }), block);\n}\n"],"names":["decorate","block","headers","data","child","index","cell","extractSidekickLibId"],"mappings":"iHAoDA,SAAwBA,EAASC,EAAoB,CACnD,MAAMC,EAAgC,CAAA,EAChCC,EAA+B,CAAA,EAErC,CAAC,GAAGF,EAAM,QAAQ,EAAE,QAAQ,CAACG,EAAOC,IAAU,CACxCA,IAAU,EACJH,EAAA,KACN,GAAG,MAAM,KAAKE,EAAM,iBAA8B,QAAQ,CAAC,EAAE,IAAKE,IAAU,CAC1E,KAAMA,EAAK,aAAe,GAC1B,GAAIC,EAAqBD,CAAI,EAAE,EAAA,EAC/B,CAAA,EAGCH,EAAA,KACH,MAAM,KAAKC,EAAM,iBAA8B,QAAQ,CAAC,EAAE,IAAKE,IAAU,CACvE,KAAMA,EAAK,aAAe,GAC1B,GAAIC,EAAqBD,CAAI,EAAE,EAAA,EAC/B,CAAA,CAEN,CACD,CAMH"}