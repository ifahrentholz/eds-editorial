{"version":3,"file":"table.js","sources":["../../src/blocks/table/table.ts"],"sourcesContent":["import { html, render } from 'lit-html';\n\ninterface TemplateArgs {\n  text?: string;\n  description?: string;\n  price?: string;\n  input?: Input[];\n  sum?: number;\n}\n\ninterface Input {\n  tableName?: string;\n  tableDescription?: string;\n  tablePrice?: string;\n}\n\nconst template = ({ text, description, price, input, sum }: TemplateArgs) => {\n  return html`\n    <table>\n      <thead>\n        <tr>\n          <th>${text}</th>\n          <th>${description}</th>\n          <th>${price}</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${input?.map((item) => {\n          return html`\n            <tr>\n              <td>${item.tableName}</td>\n              <td>${item.tableDescription}</td>\n              <td>${item.tablePrice}</td>\n            </tr>\n          `;\n        })}\n      </tbody>\n      <tfoot>\n        <tr>\n          <td colspan=\"2\"></td>\n          <td>${sum}</td>\n        </tr>\n      </tfoot>\n    </table>\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const firstRow = block.querySelector('div');\n\n  const text = firstRow?.querySelector('.table div div:first-child')?.textContent || '';\n  const description = firstRow?.querySelector('div:nth-child(2) strong')?.textContent || '';\n  const price = firstRow?.querySelector('.table div div:last-child strong')?.textContent || '';\n\n  const input: Input[] = Array.from(document.querySelectorAll('.table > div:not(:first-child)')).map((item) => {\n    return {\n      tableName: item.querySelector('div:first-child')?.textContent || '',\n      tableDescription: item.querySelector('div:nth-child(2)')?.textContent || '',\n      tablePrice: item.querySelector('div:last-child')?.textContent || '',\n    };\n  });\n\n  const result = input.reduce((total, item) => {\n    const price = item.tablePrice ? parseFloat(item.tablePrice) : 0;\n    return total + price;\n  }, 0);\n\n  const sum = parseFloat(result.toFixed(2));\n\n  block.innerHTML = '';\n  block.style.removeProperty('display');\n  render(template({ text, description, price, input, sum }), block);\n}\n"],"names":["template","text","description","price","input","sum","html","item","table","block","firstRow","_a","_b","_c","result","total","render"],"mappings":"8DAgBA,MAAMA,EAAW,CAAC,CAAE,KAAAC,EAAM,YAAAC,EAAa,MAAAC,EAAO,MAAAC,EAAO,IAAAC,KAC5CC,0BAIOL,CAAI,YACJC,CAAW,YACXC,CAAK,4BAIXC,GAAA,YAAAA,EAAO,IAAKG,GACLD,YAEGC,EAAK,SAAS,YACdA,EAAK,gBAAgB,YACrBA,EAAK,UAAU,aAGzB,+CAKMF,CAAG,6BAOnB,SAAAG,EAAyBC,EAAoB,WACrC,MAAAC,EAAWD,EAAM,cAAc,KAAK,EAEpCR,IAAOU,EAAAD,GAAA,YAAAA,EAAU,cAAc,gCAAxB,YAAAC,EAAuD,cAAe,GAC7ET,IAAcU,EAAAF,GAAA,YAAAA,EAAU,cAAc,6BAAxB,YAAAE,EAAoD,cAAe,GACjFT,IAAQU,EAAAH,GAAA,YAAAA,EAAU,cAAc,sCAAxB,YAAAG,EAA6D,cAAe,GAEpFT,EAAiB,MAAM,KAAK,SAAS,iBAAiB,gCAAgC,CAAC,EAAE,IAAKG,GAAS,WACpG,MAAA,CACL,YAAWI,EAAAJ,EAAK,cAAc,iBAAiB,IAApC,YAAAI,EAAuC,cAAe,GACjE,mBAAkBC,EAAAL,EAAK,cAAc,kBAAkB,IAArC,YAAAK,EAAwC,cAAe,GACzE,aAAYC,EAAAN,EAAK,cAAc,gBAAgB,IAAnC,YAAAM,EAAsC,cAAe,EAAA,CACnE,CACD,EAEKC,EAASV,EAAM,OAAO,CAACW,EAAOR,IAAS,CAC3C,MAAMJ,EAAQI,EAAK,WAAa,WAAWA,EAAK,UAAU,EAAI,EAC9D,OAAOQ,EAAQZ,GACd,CAAC,EAEEE,EAAM,WAAWS,EAAO,QAAQ,CAAC,CAAC,EAExCL,EAAM,UAAY,GACZA,EAAA,MAAM,eAAe,SAAS,EAC7BO,EAAAhB,EAAS,CAAE,KAAAC,EAAM,YAAAC,EAAa,MAAAC,EAAO,MAAAC,EAAO,IAAAC,CAAA,CAAK,EAAGI,CAAK,CAClE"}