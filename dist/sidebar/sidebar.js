import{s as l,x as i}from"../__chunks__/lit-element.XkUWx5ik.js";import{t as u}from"../__chunks__/property.0daVBkvz.js";import{r as h,f as P}from"../__chunks__/fetchData.GCPqwStL.js";import"../__chunks__/icon.PS61ZRz5.js";import{o as C}from"../__chunks__/unsafe-html.dKgBHtsI.js";import{c as D}from"../__chunks__/createOptimizedPicture.F94eikeI.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $=(e,t,n)=>(n.configurable=!0,n.enumerable=!0,Reflect.decorate&&typeof t!="object"&&Object.defineProperty(e,t,n),n);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function L(e,t){return(n,s,r)=>{const a=o=>{var p;return((p=o.renderRoot)==null?void 0:p.querySelector(e))??null};if(t){const{get:o,set:p}=typeof s=="object"?n:r??(()=>{const c=Symbol();return{get(){return this[c]},set(T){this[c]=T}}})();return $(n,s,{get(){let c=o.call(this);return c===void 0&&(c=a(this),(c!==null||this.hasUpdated)&&p.call(this,c)),c}})}return $(n,s,{get(){return a(this)}})}}var f={},w;function y(e){return function(...t){return function(n,s,r){return Object.assign(Object.assign({},r),{value:e(r.value,...t)})}}}Object.defineProperty(f,"__esModule",{value:!0});const x=y(function(e,t=0){let n=-1;const s=function(...r){clearTimeout(n),n=window.setTimeout(()=>{e.call(this,...r)},t)};return s.cancel=function(){clearTimeout(n)},s}),R=y(function(e,t=0){let n,s=[];const r=function(...a){s=a,n===void 0&&(n=window.setTimeout(()=>{n=void 0,e.call(this,...s)},t))};return r.cancel=function(){clearTimeout(n),n=void 0},r});w=f.debounce=x,f.throttle=R;var q=Object.defineProperty,I=Object.getOwnPropertyDescriptor,O=(e,t,n,s)=>{for(var r=s>1?void 0:s?I(t,n):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(s?o(t,n,r):o(r))||r);return s&&r&&q(t,n,r),r};let v=class extends l{constructor(){super(...arguments),this.getSubmenuName=e=>e.path.split("/")[1],this.groupByFirstLevelPath=e=>{const t={};return e.forEach(s=>{const r=this.getSubmenuName(s);t[r]||(t[r]=[]),t[r].push({path:s.path,navtitle:this.getNavTitle(s)})}),Object.values(t).map(s=>s.length===1?s[0]:{navtitle:s[0].path.split("/")[1],path:s[0].path,children:s})}}createRenderRoot(){return this}async firstUpdated(){const e=await this.fetchSitemap();this.items=this.groupByFirstLevelPath(e)}render(){if(this.items)return i`<nav id="menu"><header class="major"><h2>Menu</h2></header>${this.renderMenuItems()}</nav>`}toggleSubmenu({currentTarget:e}){!(e instanceof HTMLElement)||!e.classList.contains("opener")||e.classList.toggle("active")}renderSubMenu(e){return i`<span @click="${this.toggleSubmenu}" class="opener submenu"><span class="submenu__text">${e.navtitle}</span><icon-component class="submenu__icon" name="chevron-down"></icon-component></span><ul>${e.children.map(t=>i`<li><a href="${t.path}">${t.navtitle}</a></li>`)}</ul>`}renderMenuItem(e){return i`<li>${e.children!==void 0?this.renderSubMenu(e):i`<a href="${e.path}">${e.navtitle}</a>`}</li>`}renderMenuItems(){return i`<ul>${this.items.map(e=>this.renderMenuItem(e))}</ul>`}async fetchSitemap(){return(await(await fetch(`${window.hlx.codeBasePath}/query-index.json`)).json()).data}getNavTitle(e){return e.path==="/"?"Homepage":e.navtitle||e.title}};O([h()],v.prototype,"items",2);v=O([u("sidebar-nav")],v);var A=Object.defineProperty,N=Object.getOwnPropertyDescriptor,j=(e,t,n,s)=>{for(var r=s>1?void 0:s?N(t,n):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(s?o(t,n,r):o(r))||r);return s&&r&&A(t,n,r),r};let m=class extends l{createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.fetchContactData()}async fetchContactData(){const e=await P({endpoint:"contact.plain.html"}),t=document.createElement("div");t.innerHTML=e,this.contactTemplateArgs={headline:t.querySelector("h2"),text:t.querySelector("p"),contacts:Array.from(t.querySelectorAll(".contact > div:not(:first-child)")).map(n=>{var s,r;return{contactIcon:(s=n.querySelector("div"))==null?void 0:s.innerText,contactMarkup:(r=n.querySelector("div:last-child"))==null?void 0:r.innerHTML}})}}render(){if(!this.contactTemplateArgs)return;const{headline:e,text:t,contacts:n}=this.contactTemplateArgs;return i`<section><header class="major">${e}</header>${t}<ul class="contact">${n.map(s=>i`<li class="icon solid"><icon-component name="${s.contactIcon}"></icon-component>${C(s.contactMarkup)}</li>`)}</ul></section>`}};j([h()],m.prototype,"contactTemplateArgs",2);m=j([u("sidebar-contact")],m);var F=Object.defineProperty,H=Object.getOwnPropertyDescriptor,S=(e,t,n,s)=>{for(var r=s>1?void 0:s?H(t,n):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(s?o(t,n,r):o(r))||r);return s&&r&&F(t,n,r),r};let b=class extends l{async connectedCallback(){super.connectedCallback();const e=await this.fetchSitemap(),t=this.getPosts(e);this.lastThreePosts=this.getLastThreePosts(t)}render(){if(this.lastThreePosts)return i`<header class="major"><h2>Newest Posts</h2></header><div class="mini-posts">${this.lastThreePosts.map(e=>this.renderPost(e))}</div>`}createRenderRoot(){return this}getLastThreePosts(e){return e.sort((t,n)=>t.lastModified>n.lastModified?-1:t.lastModified<n.lastModified?1:0),e.slice(0,3)}async fetchSitemap(){return(await P({endpoint:"/query-index.json",getJson:!0})).data}renderPost(e){return i`<article><a href="${e.path}" class="image">${D({src:e.image,alt:e.imagealt})}</a><p>${e.description}</p></article>`}getPosts(e){return e.filter(t=>t.path.includes("/posts"))}};S([h()],b.prototype,"lastThreePosts",2);b=S([u("sidebar-posts")],b);var B=Object.defineProperty,U=Object.getOwnPropertyDescriptor,M=(e,t,n,s)=>{for(var r=s>1?void 0:s?U(t,n):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(s?o(t,n,r):o(r))||r);return s&&r&&B(t,n,r),r};let g=class extends l{createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.fetchFooterData()}async fetchFooterData(){var n;const e=await P({endpoint:"footer.plain.html"}),t=document.createElement("div");t.innerHTML=e,this.footerMarkup=t.querySelector("p"),(n=this.footerMarkup)==null||n.classList.add("copyright")}render(){if(this.footerMarkup)return i`${this.footerMarkup}`}};M([h()],g.prototype,"footerMarkup",2);g=M([u("sidebar-footer")],g);var V=Object.defineProperty,z=Object.getOwnPropertyDescriptor,_=(e,t,n,s)=>{for(var r=s>1?void 0:s?z(t,n):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(s?o(t,n,r):o(r))||r);return s&&r&&V(t,n,r),r};let d=class extends l{constructor(){super(...arguments),this.handleToggleClick=e=>{e.preventDefault(),this.classList.toggle("inactive")}}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.classList.add("inactive"),window.addEventListener("resize",this.setInitialVisibility.bind(this))}setInitialVisibility(){window.innerWidth<=1280?this.classList.add("inactive"):this.classList.remove("inactive")}firstUpdated(){this.toggle.addEventListener("click",this.handleToggleClick)}render(){return i`<div class="inner"><sidebar-nav></sidebar-nav><sidebar-posts></sidebar-posts><sidebar-contact></sidebar-contact><sidebar-footer id="footer"></sidebar-footer></div><a href="#sidebar" class="toggle hamburger-icon" aria-label="Sidebar toggle"><icon-component name="hamburger"></icon-component></a>`}};_([L(".toggle")],d.prototype,"toggle",2);_([w(100)],d.prototype,"setInitialVisibility",1);d=_([u("sidebar-component")],d);export{d as SidebarComponent};
//# sourceMappingURL=sidebar.js.map
