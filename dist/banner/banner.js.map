{"version":3,"file":"banner.js","sources":["../../node_modules/lit-html/directives/if-defined.js","../../src/utils/extractSidekickLibId.ts","../../src/blocks/banner/banner.ts"],"sourcesContent":["import{nothing as t}from\"../lit-html.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o=o=>o??t;export{o as ifDefined};\n//# sourceMappingURL=if-defined.js.map\n","export type ConstructedElement = {\n  id: string | undefined;\n  text: string;\n  href?: string;\n};\n\nexport const extractSidekickLibId = (element: any): ConstructedElement => {\n  const sidekickLibActive: boolean = window.location.href === 'about:srcdoc';\n\n  if (!element) return { id: undefined, text: '', href: '' };\n\n  if (sidekickLibActive) {\n    return {\n      id: element.getAttribute('data-library-id') || undefined,\n      text: element.innerHTML,\n      href: element.href || '',\n    };\n  }\n\n  return { id: undefined, text: element.innerHTML, href: element.href || '' };\n};\n","import { html, render } from 'lit';\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html.js';\nimport { ifDefined } from 'lit-html/directives/if-defined.js';\nimport { ConstructedElement, extractSidekickLibId } from '../../utils/extractSidekickLibID';\n\ninterface TemplateArgs {\n  headline: ConstructedElement;\n  subline: ConstructedElement;\n  picture?: HTMLPictureElement;\n  texts: ConstructedElement[];\n  buttons: ConstructedElement[];\n}\n\nconst template = (args: TemplateArgs) => {\n  const { headline, subline, texts, buttons, picture } = args;\n  return html`\n    <div id=\"banner\">\n      <div class=\"content\">\n        <header>\n          <h1 data-library-id=\"${ifDefined(headline.id)}\" contenteditable=\"${ifDefined(true)}\">${headline.text}</h1>\n          <p data-library-id=\"${ifDefined(subline.id)}\" contenteditable=\"${ifDefined(true)}\">${subline.text}</p>\n        </header>\n        ${texts?.map(\n          (text) =>\n            html`<p data-library-id=\"${ifDefined(text.id)}\" contenteditable=\"${ifDefined(true)}\">${text.text}</p>`\n        )}\n        <ul class=\"actions\">\n          ${buttons?.map(\n            (button) =>\n              html`<li>\n                <a\n                  href=\"${button.href}\"\n                  class=\"button big\"\n                  data-library-id=\"${ifDefined(button.id)}\"\n                  contenteditable=\"${ifDefined(true)}\"\n                  >${button.text}</a\n                >\n              </li>`\n          )}\n        </ul>\n      </div>\n      <span class=\"image object\"> ${picture ?? unsafeHTML(picture)} </span>\n    </div>\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const image = block.querySelector('img');\n  if (image) {\n    image.setAttribute('loading', 'eager');\n  }\n  const firstRow = block.querySelector('div');\n  const secondRow = block.children[1];\n  const headline = extractSidekickLibId(firstRow?.querySelector('h1'));\n  const subline = extractSidekickLibId(firstRow?.querySelector('h3'));\n  const texts = firstRow ? [...firstRow.querySelectorAll('p')].map((item) => extractSidekickLibId(item)) : [];\n  const buttons = secondRow ? [...secondRow.querySelectorAll('a')].map((item) => extractSidekickLibId(item)) : [];\n  const picture = firstRow?.querySelector('picture') || undefined;\n  const img = picture?.querySelector('img');\n  img?.setAttribute('loading', 'eager');\n\n  block.innerHTML = '';\n\n  block.style.removeProperty('display');\n  render(template({ headline, subline, texts, buttons, picture }), block);\n}\n"],"names":["o","t","extractSidekickLibId","element","sidekickLibActive","template","args","headline","subline","texts","buttons","picture","html","ifDefined","text","button","unsafeHTML","banner","block","image","firstRow","secondRow","item","img","render"],"mappings":"kIACA;AAAA;AAAA;AAAA;AAAA,GAIG,MAAMA,EAAEA,GAAGA,GAAGC,ECCJC,EAAwBC,GAAqC,CAClE,MAAAC,EAA6B,OAAO,SAAS,OAAS,eAE5D,OAAKD,EAEDC,EACK,CACL,GAAID,EAAQ,aAAa,iBAAiB,GAAK,OAC/C,KAAMA,EAAQ,UACd,KAAMA,EAAQ,MAAQ,EAAA,EAInB,CAAE,GAAI,OAAW,KAAMA,EAAQ,UAAW,KAAMA,EAAQ,MAAQ,EAAG,EAVrD,CAAE,GAAI,OAAW,KAAM,GAAI,KAAM,GAWxD,ECPME,EAAYC,GAAuB,CACvC,KAAM,CAAE,SAAAC,EAAU,QAAAC,EAAS,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAY,EAAAL,EAChD,OAAAM,uEAIwBC,EAAUN,EAAS,EAAE,CAAC,sBAAsBM,EAAU,EAAI,CAAC,KAAKN,EAAS,IAAI,4BAC9EM,EAAUL,EAAQ,EAAE,CAAC,sBAAsBK,EAAU,EAAI,CAAC,KAAKL,EAAQ,IAAI,gBAEjGC,GAAA,YAAAA,EAAO,IACNK,GACCF,wBAA2BC,EAAUC,EAAK,EAAE,CAAC,sBAAsBD,EAAU,EAAI,CAAC,KAAKC,EAAK,IAAI,OACnG,uBAEGJ,GAAA,YAAAA,EAAS,IACRK,GACCH,iBAEYG,EAAO,IAAI,yCAEAF,EAAUE,EAAO,EAAE,CAAC,sBACpBF,EAAU,EAAI,CAAC,KAC/BE,EAAO,IAAI,YAGrB,yCAGyBJ,GAAWK,EAAWL,CAAO,CAAC,eAGlE,EAEA,SAAAM,EAAyBC,EAAoB,CACrC,MAAAC,EAAQD,EAAM,cAAc,KAAK,EACnCC,GACIA,EAAA,aAAa,UAAW,OAAO,EAEjC,MAAAC,EAAWF,EAAM,cAAc,KAAK,EACpCG,EAAYH,EAAM,SAAS,CAAC,EAC5BX,EAAWL,EAAqBkB,GAAA,YAAAA,EAAU,cAAc,KAAK,EAC7DZ,EAAUN,EAAqBkB,GAAA,YAAAA,EAAU,cAAc,KAAK,EAC5DX,EAAQW,EAAW,CAAC,GAAGA,EAAS,iBAAiB,GAAG,CAAC,EAAE,IAAKE,GAASpB,EAAqBoB,CAAI,CAAC,EAAI,CAAA,EACnGZ,EAAUW,EAAY,CAAC,GAAGA,EAAU,iBAAiB,GAAG,CAAC,EAAE,IAAKC,GAASpB,EAAqBoB,CAAI,CAAC,EAAI,CAAA,EACvGX,GAAUS,GAAA,YAAAA,EAAU,cAAc,aAAc,OAChDG,EAAMZ,GAAA,YAAAA,EAAS,cAAc,OAC9BY,GAAA,MAAAA,EAAA,aAAa,UAAW,SAE7BL,EAAM,UAAY,GAEZA,EAAA,MAAM,eAAe,SAAS,EAC7BM,EAAAnB,EAAS,CAAE,SAAAE,EAAU,QAAAC,EAAS,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAA,CAAS,EAAGO,CAAK,CACxE","x_google_ignoreList":[0]}