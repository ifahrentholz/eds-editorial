{"version":3,"file":"banner.js","sources":["../../src/sidekickHelpers/extractSidekickLibraryId.ts","../../node_modules/lit-html/static.js","../../src/customDirectives/sidekickLibraryId.ts","../../src/blocks/banner/banner.ts"],"sourcesContent":["import { isSidekickLibraryActive } from './isSidekickLibraryActive';\n\n/**\n * Represents the constructed Element.\n *\n * @interface ConstructedElement\n * @property {string} dataLibraryId - The data library id generated by the Sidekick Library Plugin.\n * @property {string} innerHTML - The innerHTML of a provided element.\n * @property {HTMLElement} htmlTag -\n * @property {string} href - The href of a provided anchor element.\n */\nexport type ConstructedElement = {\n  dataLibraryId?: string;\n  innerHTML: string;\n  htmlTag: HTMLElement;\n  href?: string;\n};\n\n/**\n * Extracts the innerHTML, the href attribute (if defined) and\n * the data-library-id attribute (if the Sidekick Library Plugin is active) of a given HTML element.\n *\n * @param {HTMLElement | HTMLAnchorElement | null} element - The original HTMLElement or HTMLAnchorElement.\n * @returns {ConstructedElement} - A constructed element object.\n *\n * @example\n * const button = extractSidekickLibraryId(document.querySelector('a'));\n * <a\n *  href=\"${button.href}\"\n *  data-library-id=\"${ifDefined(button.id)}\"\n *  contenteditable=\"${ifDefined(button.id ? true : undefined)}\">\n *    ${button.text}\n * </a>\n *\n * @remarks\n * The data-library-id is generated by the Sidekick Library Plugin\n * and is necessary to copy edited block content from the Sidekick Library.\n */\nexport const extractSidekickLibraryId = (element?: HTMLElement | HTMLAnchorElement | null): ConstructedElement => {\n  const constructedElement: ConstructedElement = {\n    dataLibraryId: undefined,\n    innerHTML: '',\n    htmlTag: document.createElement('p'),\n    href: '',\n  };\n  if (!element) return constructedElement;\n\n  constructedElement.innerHTML = element.innerHTML;\n  constructedElement.htmlTag = document.createElement(element.tagName);\n  if (element instanceof HTMLAnchorElement && element.href !== '') {\n    constructedElement.href = element.href;\n  }\n\n  const sidekickLibraryId: string | null = element.getAttribute('data-library-id');\n  if (isSidekickLibraryActive() && sidekickLibraryId !== null) {\n    constructedElement.dataLibraryId = sidekickLibraryId;\n  }\n\n  return constructedElement;\n};\n","import{html as t,svg as r}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=Symbol.for(\"\"),o=t=>{if(t?.r===e)return t?._$litStatic$},i=t=>({_$litStatic$:t,r:e}),s=(t,...r)=>({_$litStatic$:r.reduce(((r,e,o)=>r+(t=>{if(void 0!==t._$litStatic$)return t._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${t}. Use 'unsafeStatic' to pass non-literal values, but\\n            take care to ensure page security.`)})(e)+t[o+1]),t[0]),r:e}),a=new Map,l=t=>(r,...e)=>{const i=e.length;let s,l;const n=[],u=[];let c,$=0,f=!1;for(;$<i;){for(c=r[$];$<i&&void 0!==(l=e[$],s=o(l));)c+=s+r[++$],f=!0;$!==i&&u.push(l),n.push(c),$++}if($===i&&n.push(r[i]),f){const t=n.join(\"$$lit$$\");void 0===(r=a.get(t))&&(n.raw=n,a.set(t,r=n)),e=u}return t(r,...e)},n=l(t),u=l(r);export{n as html,s as literal,u as svg,i as unsafeStatic,l as withStatic};\n//# sourceMappingURL=static.js.map\n","import { Directive, directive } from 'lit/directive.js';\nimport { isSidekickLibraryActive } from '../sidekickHelpers/isSidekickLibraryActive';\nimport { nothing } from 'lit';\nimport { ConstructedElement } from '../sidekickHelpers/extractSidekickLibraryId';\nimport { html, literal } from 'lit/static-html.js';\n\n// Define directive\nclass SidekickLibraryId extends Directive {\n  render(element: ConstructedElement) {\n    if (isSidekickLibraryActive()) {\n      console.log('this:', element.htmlTag);\n      const idAttributeNameLiteral = literal`data-library-id`;\n      //const idAttributeValueLiteral = literal`${element.dataLibraryId}`;\n      return html`${idAttributeNameLiteral}`;\n    }\n\n    return nothing;\n  }\n}\n// Create the directive function\nexport const getSidekickLibraryId = directive(SidekickLibraryId);\n","import { render } from 'lit';\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html.js';\nimport { ifDefined } from 'lit-html/directives/if-defined.js';\nimport { ConstructedElement, extractSidekickLibraryId } from '../../sidekickHelpers/extractSidekickLibraryId';\nimport { getSidekickLibraryId } from '../../customDirectives/sidekickLibraryId';\nimport { html, literal } from 'lit/static-html.js';\nimport './banner.scss';\n\ninterface TemplateArgs {\n  headline: ConstructedElement;\n  subline: ConstructedElement;\n  picture?: HTMLPictureElement;\n  texts: ConstructedElement[];\n  buttons: ConstructedElement[];\n}\n\nconst template = (args: TemplateArgs) => {\n  const { headline, subline, texts, buttons, picture } = args;\n  return html`\n    <div id=\"banner\">\n      <div class=\"content\">\n        <header>\n          <h1 ${getSidekickLibraryId(headline)}>${headline.innerHTML}</h1>\n          <p ${getSidekickLibraryId(subline)}>${subline.innerHTML}</p>\n        </header>\n        ${texts?.map(\n          (text) =>\n            html`<p\n              data-library-id=\"${ifDefined(text.dataLibraryId)}\"\n              contenteditable=\"${ifDefined(text.dataLibraryId ? true : undefined)}\"\n            >\n              ${text.innerHTML}\n            </p>`\n        )}\n        <ul class=\"actions\">\n          ${buttons?.map(\n            (button) =>\n              html`<li>\n                <a\n                  href=\"${button.href}\"\n                  class=\"button big\"\n                  data-library-id=\"${ifDefined(button.dataLibraryId)}\"\n                  contenteditable=\"${ifDefined(button.dataLibraryId ? true : undefined)}\"\n                  >${button.innerHTML}</a\n                >\n              </li>`\n          )}\n        </ul>\n      </div>\n      <span class=\"image object\"> ${picture ?? unsafeHTML(picture)} </span>\n    </div>\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const image = block.querySelector('img');\n  if (image) {\n    image.setAttribute('loading', 'eager');\n  }\n  const firstRow = block.querySelector('div');\n  const secondRow = block.children[1];\n  const headline = extractSidekickLibraryId(firstRow?.querySelector('h1'));\n  const subline = extractSidekickLibraryId(firstRow?.querySelector('h3'));\n  const texts = firstRow ? [...firstRow.querySelectorAll('p')].map((item) => extractSidekickLibraryId(item)) : [];\n  const buttons = secondRow ? [...secondRow.querySelectorAll('a')].map((item) => extractSidekickLibraryId(item)) : [];\n  const picture = firstRow?.querySelector('picture') || undefined;\n  const img = picture?.querySelector('img');\n  img?.setAttribute('loading', 'eager');\n\n  block.innerHTML = '';\n\n  block.style.removeProperty('display');\n  render(template({ headline, subline, texts, buttons, picture }), block);\n}\n"],"names":["extractSidekickLibraryId","element","constructedElement","sidekickLibraryId","isSidekickLibraryActive","e","o","t","s","r","a","l","i","n","u","$","f","SidekickLibraryId","Directive","idAttributeNameLiteral","literal","html","nothing","getSidekickLibraryId","directive","template","args","headline","subline","texts","buttons","picture","text","ifDefined","button","unsafeHTML","banner","block","image","firstRow","secondRow","item","img","render"],"mappings":"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","x_google_ignoreList":[1]}