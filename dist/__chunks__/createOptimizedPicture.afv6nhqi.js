const m=new Map,w=async(t,i)=>{const r=t.startsWith("/")?t:`/${t}`,n=`${window.hlx.codeBasePath}${r}`,h=new Request(n,i);if(m.has(n))return m.get(n);const c=await fetch(h);return c.ok&&m.set(n,c.clone()),c},l=async(t,i)=>await(await w(t,i)).json();class g{async getSiteMap(){return(await this.getQueryIndex()).data}async getQueryIndex(){return this.fetchPromis?this.fetchPromis:(this.fetchPromis=l("/query-index.json"),this.fetchPromis)}}const $=new g,y=async(t,i)=>(await w(t,i)).text();function x(t){const{src:i,alt:r,eager:n=!1,width:h,height:c,breakpoints:u=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]}=t,f=new URL(i,window.location.href),d=document.createElement("picture"),{pathname:o}=f,p=o.substring(o.lastIndexOf(".")+1);return u.forEach(s=>{const a=document.createElement("source");s.media&&a.setAttribute("media",s.media),a.setAttribute("type","image/webp"),a.setAttribute("srcset",`${o}?width=${s.width}&format=webply&optimize=medium`),d.appendChild(a)}),u.forEach((s,a)=>{if(a<u.length-1){const e=document.createElement("source");s.media&&e.setAttribute("media",s.media),e.setAttribute("srcset",`${o}?width=${s.width}&format=${p}&optimize=medium`),d.appendChild(e)}else{const e=document.createElement("img");e.setAttribute("loading",n?"eager":"lazy"),e.setAttribute("alt",r),e.setAttribute("width",h),e.setAttribute("height",c),d.appendChild(e),e.setAttribute("src",`${o}?width=${s.width}&format=${p}&optimize=medium`)}}),d}export{$ as S,l as a,x as c,y as f};
//# sourceMappingURL=createOptimizedPicture.afv6nhqi.js.map
