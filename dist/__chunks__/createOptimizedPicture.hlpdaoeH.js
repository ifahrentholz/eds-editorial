class l{constructor(){this.runtimeCache=new Map}get(e){return this.runtimeCache.get(e)}set(e,t){this.runtimeCache.set(e,t)}has(e){return this.runtimeCache.has(e)}delete(e){this.runtimeCache.delete(e)}}class w{constructor(){this.requestPipeline=new Map,this.runtimeCache=new l}async fetchJson(e,t={}){const{cacheOptions:s}=t,c=this.getCachedData(e,s);if(c!==null)return c;const o=this.requestPipeline.get(e);if(o!==void 0)return this.getResponseJSON(await o);const a=fetch(e,t.fetchOptions);this.requestPipeline.set(e,a);const u=await a;this.requestPipeline.delete(e);const i=await this.getResponseJSON(u);return this.setCachedData(e,i,s),i}async fetchText(e,t={}){const{cacheOptions:s}=t,c=this.getCachedData(e,s);if(c!==null)return c;const o=this.requestPipeline.get(e);if(o!==void 0)return this.getResponseText(await o);const a=fetch(e,t.fetchOptions);this.requestPipeline.set(e,a);const u=await a;this.requestPipeline.delete(e);const i=await this.getResponseText(u);return this.setCachedData(e,i,s),i}async getResponseJSON(e){return await e.clone().json()}async getResponseText(e){return await e.clone().text()}getCachedData(e,t){return(t==null?void 0:t.cacheType)==="runtime"?this.runtimeCache.get(e)??null:null}setCachedData(e,t,s){(s==null?void 0:s.cacheType)==="runtime"&&this.runtimeCache.set(e,t)}}const g=new w;class f{async getSiteMap(){return(await this.getQueryIndex()).data}async getQueryIndex(){return await g.fetchJson("/query-index.json",{cacheOptions:{cacheType:"runtime"}})}}const C=new f;function x(p){const{src:e,alt:t,eager:s=!1,width:c,height:o,breakpoints:a=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]}=p,u=new URL(e,window.location.href),i=document.createElement("picture"),{pathname:d}=u,m=d.substring(d.lastIndexOf(".")+1);return a.forEach(r=>{const h=document.createElement("source");r.media&&h.setAttribute("media",r.media),h.setAttribute("type","image/webp"),h.setAttribute("srcset",`${d}?width=${r.width}&format=webply&optimize=medium`),i.appendChild(h)}),a.forEach((r,h)=>{if(h<a.length-1){const n=document.createElement("source");r.media&&n.setAttribute("media",r.media),n.setAttribute("srcset",`${d}?width=${r.width}&format=${m}&optimize=medium`),i.appendChild(n)}else{const n=document.createElement("img");n.setAttribute("loading",s?"eager":"lazy"),n.setAttribute("alt",t),n.setAttribute("width",c),n.setAttribute("height",o),i.appendChild(n),n.setAttribute("src",`${d}?width=${r.width}&format=${m}&optimize=medium`)}}),i}export{g as F,C as S,f as a,x as c};
//# sourceMappingURL=createOptimizedPicture.hlpdaoeH.js.map
