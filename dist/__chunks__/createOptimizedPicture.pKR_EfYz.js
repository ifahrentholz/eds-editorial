class f{constructor(){this.cache=new Map,this.set=(t,c)=>{this.recordExists(t)||this.cache.set(t,c)},this.get=t=>this.recordExists(t)?this.cache.get(t):null,this.recordExists=t=>this.cache.has(t)}}const w=new f,l=async(e,t)=>{const c=e.startsWith("/")?e:`/${e}`,n=`${window.hlx.codeBasePath}${c}`,o=w.get(n);if(o!==null)return o;const h=await fetch(n,t);return w.set(n,h.clone()),h},$=async(e,t)=>await(await l(e,t)).text(),g=async(e,t)=>await(await l(e,t)).json();class x{async getSiteMap(){return(await this.getQueryIndex()).data}async getQueryIndex(){return await g("/query-index.json")}}const y=new x;function b(e){const{src:t,alt:c,eager:n=!1,width:o,height:h,breakpoints:u=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]}=e,p=new URL(t,window.location.href),d=document.createElement("picture"),{pathname:r}=p,m=r.substring(r.lastIndexOf(".")+1);return u.forEach(s=>{const a=document.createElement("source");s.media&&a.setAttribute("media",s.media),a.setAttribute("type","image/webp"),a.setAttribute("srcset",`${r}?width=${s.width}&format=webply&optimize=medium`),d.appendChild(a)}),u.forEach((s,a)=>{if(a<u.length-1){const i=document.createElement("source");s.media&&i.setAttribute("media",s.media),i.setAttribute("srcset",`${r}?width=${s.width}&format=${m}&optimize=medium`),d.appendChild(i)}else{const i=document.createElement("img");i.setAttribute("loading",n?"eager":"lazy"),i.setAttribute("alt",c),i.setAttribute("width",o),i.setAttribute("height",h),d.appendChild(i),i.setAttribute("src",`${r}?width=${s.width}&format=${m}&optimize=medium`)}}),d}export{y as S,x as a,g as b,b as c,$ as f};
//# sourceMappingURL=createOptimizedPicture.pKR_EfYz.js.map
