class l{constructor(){this.responseMap=new Map}async fetchData(t,s){const i=this.getUrl(t);if(this.responseMap.has(i))return this.responseMap.get(i);const o=fetch(i,s);this.responseMap.set(i,o);const c=await o;return c.ok||(console.error(c.statusText),this.responseMap.delete(i)),c}async fetchJson(t,s){return await(await this.fetchData(t,s)).clone().json()}async fetchText(t,s){return(await this.fetchData(t,s)).clone().text()}getUrl(t){const s=t.startsWith("/")?t:`/${t}`;return`${window.hlx.codeBasePath}${s}`}}const w=new l;function f(u){const{src:t,alt:s,eager:i=!1,width:o,height:c,breakpoints:d=[{media:"(min-width: 600px)",width:200},{width:750}]}=u,p=new URL(t,window.location.href),h=document.createElement("picture"),{pathname:a}=p,m=a.substring(a.lastIndexOf(".")+1);return d.forEach(r=>{const n=document.createElement("source");r.media&&n.setAttribute("media",r.media),n.setAttribute("type","image/webp"),n.setAttribute("srcset",`${a}?width=${r.width}&format=webply&optimize=medium`),h.appendChild(n)}),d.forEach((r,n)=>{if(n<d.length-1){const e=document.createElement("source");r.media&&e.setAttribute("media",r.media),e.setAttribute("srcset",`${a}?width=${r.width}&format=${m}&optimize=medium`),h.appendChild(e)}else{const e=document.createElement("img");e.setAttribute("loading",i?"eager":"lazy"),e.setAttribute("alt",s),e.setAttribute("width",o.toString()),e.setAttribute("height",c.toString()),h.appendChild(e),e.setAttribute("src",`${a}?width=${r.width}&format=${m}&optimize=medium`)}}),h}export{w as F,f as c};
//# sourceMappingURL=createOptimizedPicture.N04mLGiJ.js.map
