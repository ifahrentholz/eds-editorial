class w{constructor(){this.responseMap=new Map}async fetchData(t,s){const i=this.getUrl(t);if(this.responseMap.has(i))return this.responseMap.get(i);const h=fetch(i,s);this.responseMap.set(i,h);const o=await h;return o.ok||(console.error(o.statusText),this.responseMap.delete(i)),o}async fetchJson(t,s){return await(await this.fetchData(t,s)).clone().json()}async fetchText(t,s){return(await this.fetchData(t,s)).clone().text()}getUrl(t){const s=t.startsWith("/")?t:`/${t}`;return`${window.hlx.codeBasePath}${s}`}}const f=new w;function l(){if(window.location.href!=="about:srcdoc")return window.location.href;const{location:n}=window.parent,t=new URLSearchParams(n.search);return`${n.origin}${t.get("path")}`}function g(){const{location:n}=window;return n.href==="about:srcdoc"?window.parent.location:n}function $(n){const{src:t,alt:s,eager:i=!1,width:h,height:o,breakpoints:u=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]}=n,m=new URL(t,l()),d=document.createElement("picture"),{pathname:c}=m,p=c.substring(c.lastIndexOf(".")+1);return u.forEach(r=>{const a=document.createElement("source");r.media&&a.setAttribute("media",r.media),a.setAttribute("type","image/webp"),a.setAttribute("srcset",`${c}?width=${r.width}&format=webply&optimize=medium`),d.appendChild(a)}),u.forEach((r,a)=>{if(a<u.length-1){const e=document.createElement("source");r.media&&e.setAttribute("media",r.media),e.setAttribute("srcset",`${c}?width=${r.width}&format=${p}&optimize=medium`),d.appendChild(e)}else{const e=document.createElement("img");e.setAttribute("loading",i?"eager":"lazy"),e.setAttribute("alt",s),e.setAttribute("width",h),e.setAttribute("height",o),d.appendChild(e),e.setAttribute("src",`${c}?width=${r.width}&format=${p}&optimize=medium`)}}),d}export{f as F,$ as c,g};
//# sourceMappingURL=createOptimizedPicture.VF-L56J3.js.map
