class u{constructor(){this.runtimeCache=new Map}get(e){return this.runtimeCache.get(e)}set(e,t){this.runtimeCache.set(e,t)}has(e){return this.runtimeCache.has(e)}delete(e){this.runtimeCache.delete(e)}}class l{constructor(){this.requestPipeline=new Map,this.runtimeCache=new u}fetchJson(e,t={}){return this.fetchData(e,t,this.getResponseJSON)}fetchText(e,t={}){return this.fetchData(e,t,this.getResponseText)}async fetchData(e,t,s){const{cacheOptions:n}=t,r=this.getCachedData(e,n);if(r!==null)return r;const a=this.requestPipeline.get(e);if(a!==void 0)return s(await a);const i=fetch(e,t.fetchOptions);this.requestPipeline.set(e,i);const o=await i;this.requestPipeline.delete(e);const c=await s(o);return this.setCachedData(e,c,n),c}async getResponseJSON(e){return await e.clone().json()}async getResponseText(e){return await e.clone().text()}getCachedData(e,t){return(t==null?void 0:t.cacheType)==="runtime"?this.runtimeCache.get(e)??null:null}setCachedData(e,t,s){(s==null?void 0:s.cacheType)==="runtime"&&this.runtimeCache.set(e,t)}}const C=new l;export{C as F};
//# sourceMappingURL=fetch.service.UlghuvpX.js.map
