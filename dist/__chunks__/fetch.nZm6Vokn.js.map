{"version":3,"file":"fetch.nZm6Vokn.js","sources":["../../src/utils/FetchCache.ts","../../src/utils/fetch.ts"],"sourcesContent":["export class FetchCache {\n  private cache = new Map();\n\n  public set = (url: string, result: any): void => {\n    if (!this.recordExists(url)) {\n      this.cache.set(url, result);\n    }\n  };\n\n  public get = (url: string): Response | null => {\n    if (this.recordExists(url)) {\n      return this.cache.get(url);\n    }\n\n    return null;\n  };\n\n  public recordExists = (url: string): boolean => {\n    return this.cache.has(url);\n  };\n}\n\nexport default new FetchCache();\n","import fetchCache from './FetchCache.ts';\n\nconst fetchData = async (endpoint: string, init?: RequestInit): Promise<Response> => {\n  const decoratedEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\n  const url = `${window.hlx.codeBasePath}${decoratedEndpoint}`;\n  const cache = fetchCache.get(url);\n\n  if (cache !== null) {\n    return cache;\n  }\n\n  const response = await fetch(url, init);\n  fetchCache.set(url, response.clone());\n\n  return response;\n};\n\nexport const fetchText = async (endpoint: string, init?: RequestInit): Promise<string> => {\n  return await (await fetchData(endpoint, init)).text();\n};\n\nexport const fetchJson = async <T>(endpoint: string, init?: RequestInit): Promise<T> => {\n  return await (await fetchData(endpoint, init)).json();\n};\n"],"names":["FetchCache","url","result","fetchCache","fetchData","endpoint","init","decoratedEndpoint","cache","response","fetchText","fetchJson"],"mappings":"AAAO,MAAMA,CAAW,CAAjB,aAAA,CACG,KAAA,UAAY,IAEb,KAAA,IAAM,CAACC,EAAaC,IAAsB,CAC1C,KAAK,aAAaD,CAAG,GACnB,KAAA,MAAM,IAAIA,EAAKC,CAAM,CAC5B,EAGK,KAAA,IAAOD,GACR,KAAK,aAAaA,CAAG,EAChB,KAAK,MAAM,IAAIA,CAAG,EAGpB,KAGF,KAAA,aAAgBA,GACd,KAAK,MAAM,IAAIA,CAAG,CAC3B,CACF,CAEA,MAAeE,EAAA,IAAIH,ECpBbI,EAAY,MAAOC,EAAkBC,IAA0C,CACnF,MAAMC,EAAoBF,EAAS,WAAW,GAAG,EAAIA,EAAW,IAAIA,CAAQ,GACtEJ,EAAM,GAAG,OAAO,IAAI,YAAY,GAAGM,CAAiB,GACpDC,EAAQL,EAAW,IAAIF,CAAG,EAEhC,GAAIO,IAAU,KACL,OAAAA,EAGT,MAAMC,EAAW,MAAM,MAAMR,EAAKK,CAAI,EACtC,OAAAH,EAAW,IAAIF,EAAKQ,EAAS,MAAO,CAAA,EAE7BA,CACT,EAEaC,EAAY,MAAOL,EAAkBC,IACzC,MAAO,MAAMF,EAAUC,EAAUC,CAAI,GAAG,OAGpCK,EAAY,MAAUN,EAAkBC,IAC5C,MAAO,MAAMF,EAAUC,EAAUC,CAAI,GAAG"}