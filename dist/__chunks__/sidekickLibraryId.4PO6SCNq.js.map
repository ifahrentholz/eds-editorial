{"version":3,"file":"sidekickLibraryId.4PO6SCNq.js","sources":["../../src/helpers/sidekick/extractSidekickLibraryId.ts","../../src/directives/sidekickLibraryId.ts"],"sourcesContent":["import { isSidekickLibraryActive } from './isSidekickLibraryActive.ts';\n\n/**\n * Represents the constructed Element.\n *\n * @interface ConstructedElement\n * @property {string} dataLibraryId - The data library id generated by the Sidekick Library Plugin.\n * @property {string} innerHTML - The innerHTML of a provided element.\n * @property {string} href - The href of a provided anchor element.\n */\nexport type SidekickElement = {\n  dataLibraryId?: string;\n  innerHTML: string;\n  href?: string;\n};\n\n/**\n * Extracts the innerHTML, the href attribute (if defined) and\n * the data-library-id attribute (if the Sidekick Library Plugin is active) of a given HTML element.\n *\n * @param {HTMLElement | HTMLAnchorElement | null} element - The original HTMLElement or HTMLAnchorElement.\n * @returns {SidekickElement} - A constructed element object.\n *\n * @example\n * const button = extractSidekickLibraryId(document.querySelector('a'));\n * <a\n *  href=\"${button.href}\"\n *  data-library-id=\"${ifDefined(button.id)}\"\n *  contenteditable=\"${ifDefined(button.id ? true : undefined)}\">\n *    ${button.text}\n * </a>\n *\n * @remarks\n * The data-library-id is generated by the Sidekick Library Plugin\n * and is necessary to copy edited block content from the Sidekick Library.\n */\nexport const extractSidekickLibraryId = (element?: HTMLElement | HTMLAnchorElement | null): SidekickElement => {\n  const constructedElement: SidekickElement = {\n    dataLibraryId: undefined,\n    innerHTML: '',\n    href: '',\n  };\n  if (!element) return constructedElement;\n\n  constructedElement.innerHTML = element.innerHTML;\n  if (element instanceof HTMLAnchorElement && element.href !== '') {\n    constructedElement.href = element.href;\n  }\n\n  const sidekickLibraryId: string | null = element.getAttribute('data-library-id');\n  if (isSidekickLibraryActive() && sidekickLibraryId !== null) {\n    constructedElement.dataLibraryId = sidekickLibraryId;\n  }\n\n  return constructedElement;\n};\n","import { Directive, directive } from 'lit/directive.js';\nimport { AttributePart, nothing } from 'lit';\nimport { SidekickElement } from 'Helpers/sidekick/extractSidekickLibraryId';\nimport { isSidekickLibraryActive } from 'Helpers/sidekick//isSidekickLibraryActive';\n\nclass SidekickLibraryId extends Directive {\n  private part?: AttributePart;\n\n  update(part: AttributePart, props: unknown[]) {\n    this.part = part;\n    const SidekickElement = props[0] as SidekickElement;\n    return this.render(SidekickElement);\n  }\n\n  render(sidekickElement: SidekickElement) {\n    if (isSidekickLibraryActive() === false) return nothing;\n\n    const element = this.part?.element;\n    const { dataLibraryId, href } = sidekickElement;\n    if (dataLibraryId) element?.setAttribute('data-library-id', dataLibraryId);\n    if (dataLibraryId) element?.setAttribute('contenteditable', 'true');\n    if (href && element instanceof HTMLAnchorElement) element?.setAttribute('href', href);\n    return nothing;\n  }\n}\n\nexport const getSidekickLibraryId = directive(SidekickLibraryId);\n"],"names":["extractSidekickLibraryId","element","constructedElement","sidekickLibraryId","isSidekickLibraryActive","SidekickLibraryId","Directive","part","props","SidekickElement","sidekickElement","nothing","_a","dataLibraryId","href","getSidekickLibraryId","directive"],"mappings":"6JAoCa,MAAAA,EAA4BC,GAAsE,CAC7G,MAAMC,EAAsC,CAC1C,cAAe,OACf,UAAW,GACX,KAAM,EAAA,EAER,GAAI,CAACD,EAAgB,OAAAC,EAErBA,EAAmB,UAAYD,EAAQ,UACnCA,aAAmB,mBAAqBA,EAAQ,OAAS,KAC3DC,EAAmB,KAAOD,EAAQ,MAG9B,MAAAE,EAAmCF,EAAQ,aAAa,iBAAiB,EAC3E,OAAAG,EAAA,GAA6BD,IAAsB,OACrDD,EAAmB,cAAgBC,GAG9BD,CACT,EClDA,MAAMG,UAA0BC,CAAU,CAGxC,OAAOC,EAAqBC,EAAkB,CAC5C,KAAK,KAAOD,EACNE,MAAAA,EAAkBD,EAAM,CAAC,EACxB,OAAA,KAAK,OAAOC,CAAe,CACpC,CAEA,OAAOC,EAAkC,OACvC,GAAIN,EAA8B,IAAA,GAAc,OAAAO,EAE1C,MAAAV,GAAUW,EAAA,KAAK,OAAL,YAAAA,EAAW,QACrB,CAAE,cAAAC,EAAe,KAAAC,CAAS,EAAAJ,EAC5B,OAAAG,IAAwBZ,GAAA,MAAAA,EAAA,aAAa,kBAAmBY,IACxDA,IAAwBZ,GAAA,MAAAA,EAAA,aAAa,kBAAmB,SACxDa,GAAQb,aAAmB,oBAA4BA,GAAA,MAAAA,EAAA,aAAa,OAAQa,IACzEH,CACT,CACF,CAEa,MAAAI,EAAuBC,EAAUX,CAAiB"}