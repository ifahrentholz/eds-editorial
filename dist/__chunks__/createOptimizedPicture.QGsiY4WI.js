import{i as m}from"./extractSidekickLibraryId.ii0iU8xy.js";class w{constructor(){this.responseMap=new Map}async fetchData(t,i){const s=this.getUrl(t);if(this.responseMap.has(s))return this.responseMap.get(s);const h=fetch(s,i);this.responseMap.set(s,h);const n=await h;return n.ok||(console.error(n.statusText),this.responseMap.delete(s)),n}async fetchJson(t,i){return await(await this.fetchData(t,i)).clone().json()}async fetchText(t,i){return(await this.fetchData(t,i)).clone().text()}getUrl(t){const i=t.startsWith("/")?t:`/${t}`;return`${window.hlx.codeBasePath}${i}`}}const $=new w;function f(){if(!m)return window.location.href;const{location:o}=window.parent,t=new URLSearchParams(o.search);return`${o.origin}${t.get("path")}`}function A(){return m?window.parent.location:window.location}function b(o){const{src:t,alt:i,eager:s=!1,width:h,height:n,breakpoints:u=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]}=o,l=new URL(t,f()),d=document.createElement("picture"),{pathname:c}=l,p=c.substring(c.lastIndexOf(".")+1);return u.forEach(r=>{const a=document.createElement("source");r.media&&a.setAttribute("media",r.media),a.setAttribute("type","image/webp"),a.setAttribute("srcset",`${c}?width=${r.width}&format=webply&optimize=medium`),d.appendChild(a)}),u.forEach((r,a)=>{if(a<u.length-1){const e=document.createElement("source");r.media&&e.setAttribute("media",r.media),e.setAttribute("srcset",`${c}?width=${r.width}&format=${p}&optimize=medium`),d.appendChild(e)}else{const e=document.createElement("img");e.setAttribute("loading",s?"eager":"lazy"),e.setAttribute("alt",i),e.setAttribute("width",h),e.setAttribute("height",n),d.appendChild(e),e.setAttribute("src",`${c}?width=${r.width}&format=${p}&optimize=medium`)}}),d}export{$ as F,b as c,A as g};
//# sourceMappingURL=createOptimizedPicture.QGsiY4WI.js.map
